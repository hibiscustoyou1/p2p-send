# 📦 P2P 直连文件发送应用 (P2P Send)

## 📌 产品定位
本产品旨在提供一个**极简、安全、高速**的端到端 Web 文件传输工具，彻底降低不同设备、不同网络环境下极速互传文件的物理壁垒。基于高生产力的全栈开发底座（Vue 3 + Node.js + Monorepo）打造。

## 🎯 核心需求剖析
- **发送方（角色 A）**：打开 Web 应用后分配全局唯一身份并生成六位极简“邀请码”。可选择单/多文件拖拽，等待接收方连接后即刻物理直发。
- **接收方（角色 B）**：通过同款应用在显眼位置输入六位“阶段码”，与 A 建立端到端安全直连并接收流文件。
- **断连恢复（核心亮点）**：在重度网络波动（如进电梯、切 Wi-Fi）导致底层 WebRTC 断开时，系统立刻在 UI 提供震慑级断连预警，锁定错误进度。并支持在重新输入校验码后，从精准断点 `%` 继续接力续传。

## 👥 目标使用对象
- 需要极速在各类不同操作系统的设备（如 iOS 与 WindowsPC）互传 GB 级别体积文件的用户。
- 注重绝对隐私，坚决抵抗文件经过三方中心化网盘缓存、分析或限速的私密传输需求群体。

## 📊 竞品分析与核心定位
- **相较于中心化应用（微信/网盘等）**：彻底消除将隐私数据绕远路上传到第三方服务器再下载回来的荒谬感。本产品回归物理本质——点对点直传。
- **跨网段直传利器（核心突破）**：这是一款不受限于“同一局域网（LAN）/同一 Wi-Fi”限制的神器。通过基于公益开源 STUN 的广域网打洞技术，支持外部**手机（5G 流量）与室内电脑（有线宽带）**之间直接建立 WebRTC 物理隧道，无需中心服务器消耗 1KB 数据流转便可实现异网异域跨设备互通。
- **机制原理**：极其成熟。现代主流内核（Blink/WebKit）全面支持 `WebRTC API`（P2P通道）与 HTML5 `File API`/`FileSystem API`（巨型文件极速分片切割存取），能完全压榨出两端网络的最大物理带宽。

## 💻 核心交互流程大纲
1. **连接握手阶段**：用户 A 开启主页待命（状态: `Waiting...`），生成如 `782914`。用户 B 输入并配对。通道联通，UI 置绿。
2. **大文件传输阶段**：采用分片传输避免内存爆炸，进度条实时渲染剩余传输包与预估下行网速（如 `45MB/s`）。
3. **断连重试阶段**：信令服务器宕机或端网络切断，触发 `ICE Disconnected`，锁定传输界面进度的 Chunk ID。重连后通过 `REQ_RESUME` 指令精准索要剩余的二进制 Buffer 进行补发。
